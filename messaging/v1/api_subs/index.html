<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Subscriptions - Messaging Service documentation [V1]</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "API Subscriptions";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Messaging Service documentation [V1]</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../overview/">Overview and Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../msg_backend/">Messaging Backend - Apache Kafka</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../msg_flow/">Messaging API flow</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../auth/">Authentication & Authorization</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../publisher/">Publisher Guide</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../api_basic/">API Basic Information</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../api_auth/">API Authentication</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../api_projects/">API Projects</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../api_topics/">API Topics</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">API Subscriptions</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#subscriptions-api-calls">Subscriptions Api Calls</a></li>
                
                    <li><a class="toctree-l4" href="#put-manage-subscriptions-create-subscriptions">[PUT] Manage Subscriptions - Create subscriptions</a></li>
                
                    <li><a class="toctree-l4" href="#get-manage-subscriptions-list-subscriptions">[GET] Manage Subscriptions - List Subscriptions</a></li>
                
                    <li><a class="toctree-l4" href="#get-manage-subscriptions-get-a-subscriptions-list-of-authorized-users">[GET] Manage Subscriptions - Get a subscription's list of authorized users</a></li>
                
                    <li><a class="toctree-l4" href="#delete-manage-subscriptions-delete-subscriptions">[DELETE] Manage Subscriptions - Delete Subscriptions</a></li>
                
                    <li><a class="toctree-l4" href="#post-modify-push-configuration">[POST] Modify Push Configuration</a></li>
                
                    <li><a class="toctree-l4" href="#post-pull-messages-from-a-subscription-consume">[POST] Pull messages from a subscription (Consume)</a></li>
                
                    <li><a class="toctree-l4" href="#post-sending-an-ack">[POST] Sending an ACK</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../api_errors/">API Error Messages</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Messaging Service documentation [V1]</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>API Subscriptions</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/ARGOeu/argo-messaging" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="subscriptions-api-calls">Subscriptions Api Calls</h1>
<h2 id="put-manage-subscriptions-create-subscriptions">[PUT] Manage Subscriptions - Create subscriptions</h2>
<p>This request creates a new subscription in a project with a PUT request</p>
<h3 id="request">Request</h3>
<p><code>PUT /v1/projects/{project_name}/subscriptions/{subscription_name}</code></p>
<h3 id="where">Where</h3>
<ul>
<li>Project_name: Name of the project to create</li>
<li>subscription_name: The subscription name to create</li>
</ul>
<h3 id="example-request">Example request</h3>
<pre><code class="json">curl -X PUT -H &quot;Content-Type: application/json&quot;  -d 'PUTBODY'
    &quot; https://{URL}/v1/projects/EGI/subscriptions/alert_engine ?key=S3CR3T&quot;`
</code></pre>

<h3 id="put-body">PUT  BODY</h3>
<pre><code class="json">{
 &quot;topic&quot;: &quot;projects/EGI/topics/monitoring&quot;,
 &quot;ack&quot;:10
}
</code></pre>

<h3 id="responses">Responses</h3>
<p>Success Response
<code>200 OK</code></p>
<pre><code class="json">{
 &quot;name&quot;: &quot;projects/EGI/subscriptions/alert_engine&quot;,
 &quot;topic&quot;: &quot;projects/EGI/topics/monitoring&quot;,
 &quot;ackDeadlineSeconds&quot;: 10  
}
</code></pre>

<h3 id="errors">Errors</h3>
<p>Please refer to section <a href="../api_errors/">Errors</a> to see all possible Errors</p>
<h2 id="get-manage-subscriptions-list-subscriptions">[GET] Manage Subscriptions - List Subscriptions</h2>
<p>This request lists all subscriptions  in a project with a GET  request</p>
<h3 id="request_1">Request</h3>
<p><code>GET /v1/projects/{project_name}/subscriptions/</code></p>
<h3 id="where_1">Where</h3>
<ul>
<li>Project_name: Name of the project to list the subscriptions</li>
</ul>
<h3 id="example-request_1">Example request</h3>
<pre><code class="json">curl -X PUT -H &quot;Content-Type: application/json&quot;
  -d '' &quot; https://{URL}/v1/projects/EGI/subscriptions/?key=S3CR3T&quot;
</code></pre>

<h3 id="responses_1">Responses</h3>
<p>Success Response
<code>200 OK</code></p>
<pre><code class="json"> &quot;subscriptions&quot;: [
 {
  &quot;name&quot;: &quot;projects/EGI/subscriptions/alert_engine&quot;,
  &quot;topic&quot;: &quot;projects/EGI/topics/monitoring&quot;,
  &quot;pushConfig&quot;: {},
  &quot;ackDeadlineSeconds&quot;: 10
 }
]
</code></pre>

<h3 id="errors_1">Errors</h3>
<p>Please refer to section <a href="../api_errors/">Errors</a> to see all possible Errors</p>
<h2 id="get-manage-subscriptions-get-a-subscriptions-list-of-authorized-users">[GET] Manage Subscriptions - Get a subscription's list of authorized users</h2>
<p>This request returns a list of authorized users to consume from the subscription</p>
<h3 id="request_2">Request</h3>
<p>`GET /v1/projects/{project_name}/subscriptions/{sub_name}:acl``</p>
<h3 id="where_2">Where</h3>
<ul>
<li>Project_name: Name of the project to get</li>
<li>Sub_name: The subscription name</li>
</ul>
<h3 id="example-request_2">Example request</h3>
<pre><code class="json">curl -H &quot;Content-Type: application/json&quot;  
-d '' &quot; https://{URL}/v1/projects/EGI/subscriptions/subscription:acl?key=S3CR3T&quot;`
</code></pre>

<h3 id="responses_2">Responses</h3>
<p>Success Response
<code>200 OK</code></p>
<pre><code class="json">{
 &quot;authorized_users&quot;: [&quot;userC&quot;,&quot;userD&quot;]
}
</code></pre>

<h3 id="errors_2">Errors</h3>
<p>Please refer to section <a href="../api_errors/">Errors</a> to see all possible Errors</p>
<h2 id="delete-manage-subscriptions-delete-subscriptions">[DELETE] Manage Subscriptions - Delete Subscriptions</h2>
<p>This request deletes a topic in a project with a DELETE request</p>
<h3 id="request_3">Request</h3>
<p><code>DELETE /v1/projects/{project_name}/subscriptions/{subscription_name}</code></p>
<h3 id="where_3">Where</h3>
<ul>
<li>Project_name: Name of the project</li>
<li>subscription_name: The subscription name to delete</li>
</ul>
<h3 id="example-request_3">Example request</h3>
<pre><code class="json">curl -X DELETE -H &quot;Content-Type: application/json&quot;  
http://{URL}/v1/projects/EGI/subscriptions/alert_engine?key=S3CR3T
</code></pre>

<h3 id="responses_3">Responses</h3>
<p>Success Response
Code: <code>200 OK</code>, Empty response if successful.</p>
<h3 id="errors_3">Errors</h3>
<p>Please refer to section <a href="../api_errors/">Errors</a> to see all possible Errors</p>
<h2 id="post-modify-push-configuration">[POST] Modify Push Configuration</h2>
<p>This request modifies the push configuration of a subscription</p>
<h3 id="request_4">Request</h3>
<p><code>POST /v1/projects/{project_name}/subscriptions/{subscription_name}:modifyPushConfig</code></p>
<h3 id="post-body">Post body:</h3>
<pre><code>json
{
  &quot;pushConfig&quot;: {  &quot;pushEndpoint&quot;: &quot;&quot;,
                   &quot;retryPolicy&quot;: { &quot;type&quot;: &quot;linear&quot;, &quot;period&quot;: 300 }
  }
}
</code></pre>

<h3 id="where_4">Where</h3>
<ul>
<li>Project_name: Name of the project</li>
<li>subscription_name: The subscription name to consume</li>
<li>pushConfig: configuration including pushEndpoint for the remote endpoint to receive the messages. Also includes retryPolicy (type of retryPolicy and period parameters)</li>
</ul>
<h3 id="example-request_4">Example request</h3>
<p><code>curl -X POST -H "Content-Type: application/json"  
-d POSTDATA http://{URL}/v1/projects/EGI/subscriptions/alert_engine:modifyPushConfig?key=S3CR3T"</code></p>
<h3 id="post-body_1">post body:</h3>
<pre><code class="json">{
  &quot;pushConfig&quot;: {&quot;pushEndpoint&quot;: &quot;host:example.com:8080/path/to/hook&quot;,
                 &quot;retryPolicy&quot;:  { &quot;type&quot;: &quot;linear&quot;, &quot;period&quot;: 300 }
  }
}
</code></pre>

<h3 id="responses_4">Responses</h3>
<p>Success Response
Code: <code>200 OK</code>, Empty response if successful.</p>
<h3 id="errors_4">Errors</h3>
<p>Please refer to section <a href="../api_errors/">Errors</a> to see all possible Errors</p>
<h2 id="post-pull-messages-from-a-subscription-consume">[POST] Pull messages from a subscription (Consume)</h2>
<p>This request consumes messages from a subscription in a project with a POST request</p>
<h3 id="request_5">Request</h3>
<p><code>POST /v1/projects/{project_name}/subscriptions/{subscription_name}:pull</code></p>
<h3 id="post-body_2">Post body:</h3>
<pre><code class="json">{
 &quot;maxMessages&quot;: &quot;1&quot;,
}
</code></pre>

<h3 id="where_5">Where</h3>
<ul>
<li>Project_name: Name of the project</li>
<li>subscription_name: The subscription name to consume</li>
<li>maxMessages: the max number of messages to consume</li>
</ul>
<h3 id="example-request_5">Example request</h3>
<pre><code class="json">curl -X POST -H &quot;Content-Type: application/json&quot;
  -d POSTDATA https://{URL}/v1/projects/EGI/subscriptions/alert_engine:pull?key=S3CR3T&quot;
</code></pre>

<h3 id="post-body_3">post body:</h3>
<p>{
 "maxMessages": "1",
}</p>
<h3 id="responses_5">Responses</h3>
<p><code>200 OK</code></p>
<pre><code class="json">{
  &quot;receivedMessages&quot;: [
    {
      &quot;ackId&quot;: &quot;dQNNHlAbEGEIBE...&quot;,
      &quot;message&quot;: {
        &quot;attributes&quot;: [
          {
            &quot;key&quot;: &quot;whatever&quot;,
            &quot;value&quot;: &quot;foo&quot;
          }
        ],
        &quot;data&quot;: &quot;U28geW91IHdlbnQgYWhlYWQgYW5kIGRlY29kZWQgdGhpcywgeW91IGNvdWxkbid0IHJlc2lzdCBlaCA/&quot;,
        &quot;messageId&quot;: &quot;100309303&quot;
      }
    }
  ]
}
</code></pre>

<h3 id="errors_5">Errors</h3>
<p>Please refer to section <a href="../api_errors/">Errors</a> to see all possible Errors</p>
<h2 id="post-sending-an-ack">[POST] Sending an ACK</h2>
<p>Messages retrieved from a pull subscription can be acknowledged by sending message with an array of ackIDs. In the current implementation, the service will retrieve the ackID corresponding to the highest message offset and will consider that message and all previous messages as acknowledged by the consumer.</p>
<h3 id="request_6">Request</h3>
<p><code>POST /v1/projects/{project_name}/subscriptions/{subscription_name}:acknowledge</code></p>
<h3 id="post-body_4">Post body:</h3>
<pre><code class="json">{
  &quot;ackIds&quot;: [
  &quot;dQNNHlAbEGEIBE...&quot;
 ],

}
</code></pre>

<h3 id="where_6">Where</h3>
<ul>
<li>Project_name: Name of the project</li>
<li>subscription_name: The subscription name to consume</li>
<li>ackIds: the ids of the messages</li>
</ul>
<h3 id="example-request_6">Example request</h3>
<p>`curl -X POST -H "Content-Type: application/json"<br />
-d POSTDATA http://{URL}/v1/projects/EGI/subscriptions/alert_engine:acknowledge?key=S3CR3T"</p>
<pre><code>
### post body:
```json
{
 &quot;ackIds&quot;: [
  &quot;dQNNHlAbEGEIBE...&quot;
 ],

}
</code></pre>

<h3 id="responses_6">Responses</h3>
<p>Success Response
<code>200 OK</code></p>
<h3 id="errors_6">Errors</h3>
<p>Please refer to section <a href="../api_errors/">Errors</a> to see all possible Errors</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api_errors/" class="btn btn-neutral float-right" title="API Error Messages"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../api_topics/" class="btn btn-neutral" title="API Topics"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright © 2014 - 2015 GRNET S.A.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../api_topics/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../api_errors/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
